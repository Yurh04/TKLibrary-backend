# 学习题库网站后端接口文档

## 1. 概述
本文档描述了学习题库网站后端的所有API接口，包括题目管理和AI相关功能。

## 2. 基础信息
- 服务器地址：`http://localhost:8080`
- API前缀：`/api`
- 响应格式：JSON
- 认证方式：无（开发阶段）

## 3. 题目管理API

### 3.1 保存题目
**接口URL**：`/api/addQuestions`  
**请求方法**：`POST`  
**请求参数**：
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| content | String | 是 | 题目内容 |
| answer | String | 是 | 正确答案 |
| subject | String | 是 | 题目科目 |

**响应格式**：
```json
{
  "id": 1,
  "content": "题目内容",
  "answer": "正确答案",
  "subject": "科目"
}
```

**示例请求**：
```json
{
  "content": "计算：1+2+3+...+100的和",
  "answer": "5050",
  "subject": "数学"
}
```

### 3.2 获取题目列表
**接口URL**：`/api/fetchQuestions`  
**请求方法**：`GET`  
**响应格式**：
```json
[
  {
    "id": 1,
    "content": "题目内容",
    "answer": "正确答案",
    "subject": "科目"
  },
  // 更多题目...
]
```

### 3.3 获取题目详情
**接口URL**：`/api/questions/:id`  
**请求方法**：`GET`  
**路径参数**：
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| id | Long | 是 | 题目ID |

**响应格式**：
```json
{
  "id": 1,
  "content": "题目内容",
  "answer": "正确答案",
  "subject": "科目"
}
```

### 3.4 编辑题目
**接口URL**：`/api/editQuestions`  
**请求方法**：`POST`  
**请求参数**：
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| id | Long | 是 | 题目ID |
| content | String | 是 | 题目内容 |
| answer | String | 是 | 正确答案 |
| subject | String | 是 | 题目科目 |

**响应格式**：
```json
{
  "id": 1,
  "content": "更新后的题目内容",
  "answer": "更新后的正确答案",
  "subject": "更新后的科目"
}
```

**示例请求**：
```json
{
  "id": 1,
  "content": "计算：1+2+3+...+100的和（更新）",
  "answer": "5050",
  "subject": "数学"
}
```

## 4. AI相关API

### 4.1 AI打分
**接口URL**：`/api/questions/score`  
**请求方法**：`POST`  
**请求参数**：
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| id | Long | 是 | 题目ID |
| answer | String | 是 | 用户答案 |

**响应格式**：
```json
{
  "evaluation": "评价内容",
  "score": 100,
  "pointsEarned": "得分点",
  "pointsLost": "失分点",
  "success": true
}
```

**示例请求**：
```json
{
  "id": 1,
  "answer": "5050"
}
```

**示例响应**：
```json
{
  "evaluation": "回答正确",
  "score": 100,
  "pointsEarned": "1. 答案完全正确",
  "pointsLost": "无",
  "success": true
}
```

### 4.2 AI问答
**接口URL**：`/api/questions/ask`  
**请求方法**：`POST`  
**请求参数**：
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| question | String | 是 | 问题内容 |

**响应格式**：
```json
{
  "answer": "AI回答内容",
  "success": true
}
```

**示例请求**：
```json
{
  "question": "什么是Spring Boot？"
}
```

**示例响应**：
```json
{
  "answer": "Spring Boot是一个基于Spring框架的开源框架，旨在简化Spring应用的初始搭建和开发过程...",
  "success": true
}
```

## 5. 错误处理
所有API在出现错误时都会返回统一的错误格式：
```json
{
  "error": "错误信息",
  "success": false
}
```

## 6. 状态码说明
| 状态码 | 描述 |
|--------|------|
| 200 | 请求成功 |
| 201 | 创建成功 |
| 400 | 请求参数错误 |
| 404 | 资源不存在 |
| 500 | 服务器内部错误 |

## 7. 数据模型
### Question（题目）
| 字段名 | 类型 | 描述 |
|--------|------|------|
| id | Long | 题目ID |
| content | String | 题目内容 |
| answer | String | 正确答案 |
| subject | String | 题目科目 |

## 8. 技术栈
- Spring Boot 3.2.0
- Spring Data JPA
- H2 内存数据库
- Qwen AI API

## 9. 开发说明
- 数据库使用H2内存数据库，重启后数据会丢失
- AI功能使用Qwen API，需要配置`DASHSCOPE_API_KEY`
- 项目使用Maven构建，运行命令：`mvn spring-boot:run`